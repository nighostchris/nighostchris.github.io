{"version":3,"sources":["webpack:///./node_modules/react-grid-heatmap/dist/index.modern.js","webpack:///./src/pages/stock.js","webpack:///(webpack)/buildin/global.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","noop","returnVal","Cell$1","memo","_ref","_ref$render","render","_ref$style","style","ratio","posX","posY","_ref$square","square","_ref$height","height","value","_onClick","onClick","createElement","border","borderWidth","textAlign","color","overflow","boxSizing","flexGrow","flexBasis","flexShrink","lineHeight","borderRadius","fontSize","cursor","background","Row","children","_ref$reverse","reverse","display","flexDirection","justifyContent","XLabels","labels","_ref$xLabelsStyle","xLabelsStyle","widthPercent","map","label","index","padding","width","Column","_ref$grow","grow","YLabels","_ref$yLabelsStyle","yLabelsStyle","YLabelAligner","_style","xLabelHeight","isXLabelReverse","initHeight","eleRef","_React$useState","eleHeight","setEleHeight","data","xLabels","yLabels","_ref$xLabelsPos","xLabelsPos","_ref$yLabelsPos","yLabelsPos","_ref$cellHeight","cellHeight","cellStyle","cellRender","_useElemetHeight","useRef","useState","useEffect","current","clientHeight","xLabelRef","_getMinMax","flatArray","reduce","o","concat","max","Math","min","getMinMax","minMaxDiff","isYLabelReverse","ref","rowItems","xi","yi","stockQuery","StockPage","breadths","nighost","snp_breadths","sort","a","b","Date","date","yHeatmapData","communication","consumer_discretionary","consumer_staples","energy","financials","health_care","industrials","materials","real_estate","technology","utilities","heatmapData","_","summedHeatmapData","acc","console","log","calculateHeatmapColor","red","white","green","normalizedRatio","className","Helmet","marginRight","x","y","_ratio","title","fontWeight","g","Function","e","window","module","exports"],"mappings":"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","file":"component---src-pages-stock-js-c63ab851cd01d431c576.js","sourcesContent":["import React__default, { createElement } from 'react';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar noop = function noop(returnVal) {\n  return function () {\n    return returnVal;\n  };\n};\n\nvar Cell = function Cell(_ref) {\n  var _ref$render = _ref.render,\n      render = _ref$render === void 0 ? noop(null) : _ref$render,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? noop({}) : _ref$style,\n      ratio = _ref.ratio,\n      posX = _ref.posX,\n      posY = _ref.posY,\n      _ref$square = _ref.square,\n      square = _ref$square === void 0 ? false : _ref$square,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? '2rem' : _ref$height,\n      value = _ref.value,\n      _onClick = _ref.onClick;\n  return React__default.createElement(\"div\", {\n    onClick: function onClick() {\n      return (_onClick || noop({}))(posX, posY);\n    },\n    style: _extends({\n      border: '1px solid #fff',\n      borderWidth: '1px 1px 0 0',\n      textAlign: 'center',\n      color: \"rgb(0, 0, 0, \" + (ratio / 2 + 0.4) + \")\",\n      overflow: 'hidden',\n      boxSizing: 'border-box',\n      flexGrow: square ? 0 : 1,\n      flexBasis: square ? height : 0,\n      flexShrink: 0,\n      height: height,\n      lineHeight: height,\n      borderRadius: '4px',\n      fontSize: '.8rem',\n      cursor: _onClick ? 'pointer' : 'initial',\n      background: \"rgb(12, 160, 44, \" + (ratio + 0.05) + \")\"\n    }, style(posX, posY, ratio))\n  }, render(posX, posY, value));\n};\n\nvar Cell$1 = React__default.memo(Cell);\n\nfunction Row(_ref) {\n  var children = _ref.children,\n      _ref$reverse = _ref.reverse,\n      reverse = _ref$reverse === void 0 ? false : _ref$reverse;\n  return React__default.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: reverse ? 'row-reverse' : 'row',\n      justifyContent: reverse ? 'flex-end' : 'initial'\n    }\n  }, children);\n}\n\nfunction XLabels(_ref) {\n  var labels = _ref.labels,\n      _ref$xLabelsStyle = _ref.xLabelsStyle,\n      xLabelsStyle = _ref$xLabelsStyle === void 0 ? function () {\n    return {};\n  } : _ref$xLabelsStyle,\n      height = _ref.height,\n      _ref$square = _ref.square,\n      square = _ref$square === void 0 ? false : _ref$square;\n  var widthPercent = 100 / labels.length + \"%\";\n  return React__default.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      textAlign: 'center'\n    }\n  }, labels.map(function (label, index) {\n    return React__default.createElement(\"div\", {\n      key: label,\n      style: _extends({\n        padding: '0.2rem 0',\n        boxSizing: 'border-box',\n        flexGrow: square ? 'initial' : 1,\n        overflow: 'hidden',\n        flexShrink: 1,\n        flexBasis: square ? height : widthPercent,\n        width: square ? height : widthPercent\n      }, xLabelsStyle(index))\n    }, label);\n  }));\n}\n\nfunction Column(_ref) {\n  var children = _ref.children,\n      _ref$grow = _ref.grow,\n      grow = _ref$grow === void 0 ? false : _ref$grow,\n      _ref$reverse = _ref.reverse,\n      reverse = _ref$reverse === void 0 ? false : _ref$reverse;\n  return React__default.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: reverse ? 'column-reverse' : 'column',\n      flexGrow: grow ? 1 : 0\n    }\n  }, children);\n}\n\nfunction YLabels(_ref) {\n  var labels = _ref.labels,\n      height = _ref.height,\n      _ref$yLabelsStyle = _ref.yLabelsStyle,\n      yLabelsStyle = _ref$yLabelsStyle === void 0 ? function () {\n    return {};\n  } : _ref$yLabelsStyle,\n      _ref$reverse = _ref.reverse,\n      reverse = _ref$reverse === void 0 ? false : _ref$reverse;\n  return React__default.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      textAlign: reverse ? 'left' : 'right'\n    }\n  }, labels.map(function (label, index) {\n    return React__default.createElement(\"div\", {\n      key: label,\n      style: _extends({\n        boxSizing: 'border-box',\n        padding: '0 0.2rem',\n        lineHeight: height\n      }, yLabelsStyle(index))\n    }, label);\n  }));\n}\n\nfunction YLabelAligner(_ref) {\n  var _style;\n\n  var xLabelHeight = _ref.xLabelHeight,\n      isXLabelReverse = _ref.isXLabelReverse,\n      children = _ref.children;\n  var style = (_style = {}, _style[isXLabelReverse ? 'marginBottom' : 'marginTop'] = xLabelHeight + \"px\", _style);\n  return React__default.createElement(\"div\", {\n    style: style\n  }, children);\n}\n\nfunction useElemetHeight(initHeight) {\n  var eleRef = React__default.useRef(null);\n\n  var _React$useState = React__default.useState(initHeight),\n      eleHeight = _React$useState[0],\n      setEleHeight = _React$useState[1];\n\n  React__default.useEffect(function () {\n    if (eleRef.current) {\n      var height = (eleRef.current || {}).clientHeight;\n      setEleHeight(height);\n    }\n  }, []);\n  return [eleHeight, eleRef];\n}\n\nfunction getMinMax(data) {\n  var flatArray = data.reduce(function (i, o) {\n    return [].concat(o, i);\n  }, []);\n  var max = Math.max.apply(Math, flatArray);\n  var min = Math.min.apply(Math, flatArray);\n  return [min, max];\n}\n\nvar HeatMapGrid = function HeatMapGrid(_ref) {\n  var data = _ref.data,\n      xLabels = _ref.xLabels,\n      yLabels = _ref.yLabels,\n      _ref$xLabelsPos = _ref.xLabelsPos,\n      xLabelsPos = _ref$xLabelsPos === void 0 ? 'top' : _ref$xLabelsPos,\n      _ref$yLabelsPos = _ref.yLabelsPos,\n      yLabelsPos = _ref$yLabelsPos === void 0 ? 'left' : _ref$yLabelsPos,\n      _ref$square = _ref.square,\n      square = _ref$square === void 0 ? false : _ref$square,\n      _ref$cellHeight = _ref.cellHeight,\n      cellHeight = _ref$cellHeight === void 0 ? '2px' : _ref$cellHeight,\n      xLabelsStyle = _ref.xLabelsStyle,\n      yLabelsStyle = _ref.yLabelsStyle,\n      cellStyle = _ref.cellStyle,\n      cellRender = _ref.cellRender,\n      onClick = _ref.onClick;\n\n  var _useElemetHeight = useElemetHeight(22),\n      xLabelHeight = _useElemetHeight[0],\n      xLabelRef = _useElemetHeight[1];\n\n  var _getMinMax = getMinMax(data),\n      min = _getMinMax[0],\n      max = _getMinMax[1];\n\n  var minMaxDiff = max - min;\n  var isXLabelReverse = xLabelsPos === 'bottom';\n  var isYLabelReverse = yLabelsPos === 'right';\n  return createElement(Row, {\n    reverse: isYLabelReverse\n  }, yLabels && createElement(YLabelAligner, {\n    xLabelHeight: xLabelHeight,\n    isXLabelReverse: isXLabelReverse\n  }, createElement(YLabels, {\n    reverse: isYLabelReverse,\n    labels: yLabels,\n    height: cellHeight,\n    yLabelsStyle: yLabelsStyle\n  })), createElement(Column, {\n    reverse: isXLabelReverse,\n    grow: !square\n  }, createElement(\"div\", {\n    ref: xLabelRef\n  }, xLabels && createElement(XLabels, {\n    labels: xLabels,\n    xLabelsStyle: xLabelsStyle,\n    height: cellHeight,\n    square: square\n  })), createElement(Column, null, data.map(function (rowItems, xi) {\n    return createElement(Row, {\n      key: xi\n    }, rowItems.map(function (value, yi) {\n      return createElement(Cell$1, {\n        key: xi + \"-\" + yi,\n        posX: xi,\n        posY: yi,\n        onClick: onClick,\n        value: value,\n        height: cellHeight,\n        square: square,\n        render: cellRender,\n        style: cellStyle,\n        ratio: (value - min) / minMaxDiff\n      });\n    }));\n  }))));\n};\n\nexport { HeatMapGrid };","import React from \"react\";\nimport { Helmet } from \"react-helmet\";\nimport { HeatMapGrid } from 'react-grid-heatmap';\n\nconst StockPage = ({ data }) => {\n  const breadths = data.nighost.snp_breadths.sort((a, b) => new Date(a.date) > new Date(b.date) ? -1 : 1);\n  \n  //XLC (通訊服務)\", \"XLY (非切需消費品)\", \"XLP (必需消費品)\", \"XLE (能源)\", \"XLF (金融)\", \"XLV (醫療)\", \"XLI (工業)\", \"XLB (物料)\", \"XLRE (房地產)\", \"XLK (科技)\", \"XLU (公共)\n  const xLabels = [\"XLC\", \"XLY\", \"XLP\", \"XLE\", \"XLF\", \"XLV\", \"XLI\", \"XLB\", \"XLRE\", \"XLK\", \"XLU\"];\n  const yLabels = breadths.map((b) => b.date);\n\n  const yHeatmapData = breadths.map((b) => [\n    b.communication,\n    b.consumer_discretionary,\n    b.consumer_staples,\n    b.energy,\n    b.financials,\n    b.health_care,\n    b.industrials,\n    b.materials,\n    b.real_estate,\n    b.technology,\n    b.utilities\n  ]);\n\n  const heatmapData = yLabels.map((_, index) => yHeatmapData[index]);\n  const summedHeatmapData = yLabels.map((_, index) => [yHeatmapData[index].reduce((acc, current) => acc + current)]);\n\n  console.log(summedHeatmapData);\n\n  const calculateHeatmapColor = (ratio) => {\n    const red = [250, 87, 87];\n    const white = [255, 255, 255];\n    const green = [14, 158, 109];\n\n    if (ratio < 0.5) {\n      const normalizedRatio = ratio * 2;\n      return `rgb(${red[0] + (white[0] - red[0]) * normalizedRatio}, ${red[1] + (white[1] - red[1]) * normalizedRatio}, ${red[2] + (white[2] - red[2]) * normalizedRatio})`\n    } else if (ratio > 0.5) {\n      const normalizedRatio = (ratio - 0.5) * 2;\n      return `rgb(${white[0] - (white[0] - green[0]) * normalizedRatio}, ${white[1] - (white[1] - green[1]) * normalizedRatio}, ${white[2] - (white[2] - green[2]) * normalizedRatio})`\n    } else {\n      return \"rgb(255, 255, 255)\";\n    }\n  }\n\n  return (\n    <div className=\"w-full h-full bg-gray-400\">\n      <Helmet>\n        <title>Chris Liu - US Stock Market</title>\n      </Helmet>\n      <div className=\"w-full h-full md:max-w-screen-md lg:max-w-screen-lg xl:max-w-screen-xl 2xl:max-w-screen-2xl flex flex-col mx-auto\">\n        <div className=\"w-full hidden md:block px-6 py-8 bg-gray-200 rounded-sm shadow-sm mt-8\">\n          <HeatMapGrid\n            data={heatmapData}\n            xLabels={xLabels}\n            xLabelsStyle={() => ({\n              fontSize: '14px'\n            })}\n            yLabels={yLabels}\n            yLabelsStyle={() => ({\n              fontSize: '14px',\n              marginRight: '16px',\n              textAlign: 'justify'\n            })}\n            cellHeight='48px'\n            cellStyle={(x, y, _ratio) => ({\n              background: calculateHeatmapColor(heatmapData[x][y] / 100)\n            })}\n            cellRender={(x, y, value) => <div title={`Pos(${x}, ${y}) = ${value}`} style={{ fontWeight: 'bold', fontSize: '16px' }}>{value}</div>}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport const stockQuery = graphql`\n  query stockQuery {\n    nighost {\n      snp_breadths {\n        date\n        communication\n        consumer_discretionary\n        consumer_staples\n        energy\n        financials\n        health_care\n        industrials\n        materials\n        real_estate\n        technology\n        utilities\n      }\n    }\n  }\n`;\n\nexport default StockPage;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n"],"sourceRoot":""}